<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\ENVAULT\Envault-Backend\Envault-Backend\Controllers\AccountOpeningController.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using ApplicationLayer.Interfaces;
using BusinessLogicLayer;
using CoreModels.Entities;
using CoreModels;
using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Mvc;
using CoreModels.Models;

namespace Envault_Backend.Controllers
{
    [Route(&quot;api/[controller]&quot;)]
    [ApiController]
    public class AccountOpeningController : ControllerBase
    {
        private readonly AccountOpeningService _accountOpeningService;
        private readonly IConfiguration _configuration;
        private readonly TokenService _tokenService;
        private readonly ILogger&lt;AccountOpeningController&gt; _logger;
        public AccountOpeningController(IUnitOfWork unitOfWork, IConfiguration configuration, ILogger&lt;AccountOpeningController&gt; logger)
        {
            _accountOpeningService = new AccountOpeningService(unitOfWork);
            _configuration = configuration;
            _tokenService = new TokenService(configuration);
            _logger = logger;
        }
        [HttpPost]
        [Route(&quot;CheckUserExistence&quot;)]
        public async Task&lt;GenericResponse&gt; CheckUserExistence(long aadharNumber, long mobileNumber, DateOnly dateOfBirth)
        {
            try
            {
                BasicDetailsEntity? userDetails = await Task.FromResult(_accountOpeningService.CheckUserExistence(aadharNumber, mobileNumber, dateOfBirth));
                if (userDetails != null)
                {
                    return new GenericResponse { Status = true, Data = userDetails  };
                }
                return new GenericResponse { Status = true, Data = userDetails };
            }
            catch(Exception ex) 
            {
                _logger.LogError(ex.Message);
                return new GenericResponse { Status = false, Error = new Error() { Description = &quot;&quot; } };
            }
        }
        [HttpPost]
        [Route(&quot;IsUniqueEmail&quot;)]
        public async Task&lt;GenericResponse&gt; IsUniqueEmail(string email)
        {
            try
            {
                bool result = await Task.FromResult(_accountOpeningService.IsUniqueEmail(email));
                if (result)
                    return new GenericResponse { Status = true, Data = result };
                return new GenericResponse() { Status = true, Data = _configuration[&quot;GenericMessages:Values:duplicateEmailError&quot;] };
            }
            catch (Exception ex)
            {
                _logger.LogError(ex.Message);
                return new GenericResponse { Status = false, Error = new Error() { Description = &quot;&quot; } };
            }
        }
        [HttpPost]
        [Route(&quot;IsUniquePANNumber&quot;)]
        public async Task&lt;GenericResponse&gt; IsUniquePANNumber(string panNumber)
        {
            try
            {
                bool result = await Task.FromResult(_accountOpeningService.IsUniquePANNumber(panNumber));
                if (result)
                    return new GenericResponse { Status = true, Data = result };
                return new GenericResponse() { Status = true, Data = _configuration[&quot;GenericMessages:Values:duplicatePANError&quot;] };
            }
            catch (Exception ex)
            {
                _logger.LogError(ex.Message);
                return new GenericResponse { Status = false, Error = new Error() { Description = &quot;&quot; } };
            }
        }
        [HttpGet]
        [Route(&quot;GetAllBranches&quot;)]
        public async Task&lt;GenericResponse&gt; GetAllBranches()
        {
            try
            {
                List&lt;BranchDetails&gt; branches = await Task.FromResult(_accountOpeningService.GetAllBranches());
                if (branches.Count != 0)
                {
                    return new GenericResponse { Status = true, Data = branches };
                }
                return new GenericResponse { Status = true, Data = _configuration[&quot;GenericMessages:Values:LoadingBranchFail&quot;] };
            }
            catch (Exception ex)
            {
                _logger.LogError(ex.Message);
                return new GenericResponse { Status = false, Error = new Error() { Description = &quot;&quot; } };
            }
        }
        [HttpPost]
        [Route(&quot;CreateNewAccount&quot;)]
        public async Task&lt;GenericResponse&gt; CreateNewAccount(BasicDetailsEntity basicDetails)
        {
            try
            {
                Object accountDetails = await Task.FromResult(_accountOpeningService.CreateNewAccount(basicDetails));
                if (accountDetails != null)
                {
                    return new GenericResponse { Status = true, Data = accountDetails };
                }
                return new GenericResponse { Status = true };
            }
            catch (Exception ex)
            {
                _logger.LogError(ex.Message);
                return new GenericResponse { Status = false, Error = new Error() { Description = &quot;&quot; } };
            }
        }
        [HttpPost]
        [Route(&quot;CreateAnotherAccount&quot;)]
        public async Task&lt;GenericResponse&gt; CreateAnotherAccount(AccountsEntity account)
        {
            try
            {
                Object accountDetails = await Task.FromResult(_accountOpeningService.CreateAnotherAccount(account));
                if (accountDetails != null)
                {
                    return new GenericResponse() { Status = true, Data = accountDetails };
                }
                return new GenericResponse() { Status = true};
            }
            catch (Exception ex)
            {
                _logger.LogError(ex.Message);
                return new GenericResponse { Status = false, Error = new Error() { Description = &quot;&quot; } };
            }
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[19,9,19,136,1],[20,9,20,10,1],[21,13,21,76,1],[22,13,22,44,1],[23,13,23,61,1],[24,13,24,30,1],[25,9,25,10,1],[29,9,29,10,1],[31,13,31,14,1],[32,17,32,157,1],[33,17,33,41,1],[34,17,34,18,1],[35,21,35,87,1],[37,17,37,82,1],[39,13,39,32,1],[40,13,40,14,1],[41,17,41,46,1],[42,17,42,105,1],[44,9,44,10,1],[48,9,48,10,1],[50,13,50,14,1],[51,17,51,98,1],[52,17,52,28,1],[53,21,53,81,1],[54,17,54,133,1],[56,13,56,33,1],[57,13,57,14,1],[58,17,58,46,1],[59,17,59,105,1],[61,9,61,10,1],[65,9,65,10,1],[67,13,67,14,1],[68,17,68,106,1],[69,17,69,28,1],[70,21,70,81,1],[71,17,71,131,1],[73,13,73,33,1],[74,13,74,14,1],[75,17,75,46,1],[76,17,76,105,1],[78,9,78,10,1],[82,9,82,10,1],[84,13,84,14,1],[85,17,85,111,1],[86,17,86,41,1],[87,17,87,18,1],[88,21,88,83,1],[90,17,90,129,1],[92,13,92,33,1],[93,13,93,14,1],[94,17,94,46,1],[95,17,95,105,1],[97,9,97,10,1],[101,9,101,10,1],[103,13,103,14,1],[104,17,104,118,1],[105,17,105,44,1],[106,17,106,18,1],[107,21,107,89,1],[109,17,109,62,1],[111,13,111,33,1],[112,13,112,14,1],[113,17,113,46,1],[114,17,114,105,1],[116,9,116,10,1],[120,9,120,10,1],[122,13,122,14,1],[123,17,123,117,1],[124,17,124,44,1],[125,17,125,18,1],[126,21,126,91,1],[128,17,128,63,1],[130,13,130,33,1],[131,13,131,14,1],[132,17,132,46,1],[133,17,133,105,1],[135,9,135,10,1]]);
    </script>
  </body>
</html>