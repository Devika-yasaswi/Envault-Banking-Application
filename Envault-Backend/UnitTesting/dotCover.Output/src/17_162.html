<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\ENVAULT\Envault-Backend\UnitTesting\AdminTest\AdminControllerTest.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using ApplicationLayer.Interfaces;
using CoreModels;
using CoreModels.Entities;
using DataAccessLayer.Infrastructure;
using Envault_Backend.Controllers;
using Microsoft.Extensions.Configuration;
using Microsoft.Extensions.Logging;
using Moq;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace UnitTesting.AdminTest
{
    public class AdminControllerTest
    {
        private AdminController _adminController;
        private Mock&lt;IAdminRepository&gt; _adminRepository;
        private Mock&lt;IUnitOfWork&gt; _unitOfWork;
        private Mock&lt;IConfiguration&gt; _mockConfig;
        private Mock&lt;ILogger&lt;AdminController&gt;&gt; _logger;
        [OneTimeSetUp]
        public void SetUp()
        {

        }
        [SetUp]
        public void ReintializeTest()
        {
            _unitOfWork = new Mock&lt;IUnitOfWork&gt;();
            _mockConfig = new Mock&lt;Microsoft.Extensions.Configuration.IConfiguration&gt;();
            _logger = new Mock&lt;ILogger&lt;AdminController&gt;&gt;();

            var configSection = new Mock&lt;IConfigurationSection&gt;();
            configSection.Setup(a =&gt; a.GetSection(&quot;key&quot;).Value).Returns(&quot;Devika@123#$%^&amp;*&amp;^%$#$%^&amp;*&amp;^%$#%^&amp;*(*&amp;$#@#%^&amp;*&amp;^$#%^&amp;*&amp;^$#$%^&amp;*&amp;^%$#$%&amp;*&amp;^$#$%&amp;*&quot;);
            configSection.Setup(a =&gt; a.GetSection(&quot;Issuer&quot;).Value).Returns(&quot;Devika@12345&quot;);
            configSection.Setup(a =&gt; a.GetSection(&quot;Audience&quot;).Value).Returns(&quot;Devika@12345&quot;);
            _mockConfig.Setup(a =&gt; a.GetSection(&quot;Jwt&quot;)).Returns(configSection.Object);

            _adminController = new AdminController(_unitOfWork.Object, configSection.Object, _logger.Object);
            _adminRepository = new Mock&lt;IAdminRepository&gt;();
            _unitOfWork.Setup(a =&gt; a.AdminRepository).Returns(_adminRepository.Object);
        }
        [Test]
        public void GetAllPendingRequests()
        {
            _adminRepository.Setup(customer =&gt; customer.GetAllPendingRequests()).Returns(new List&lt;KYCEntity&gt;());
            var response = _adminController.GetAllPendingRequests();
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.True);
        }
        [Test]
        public void GetAllPendingRequests_Exception()
        {
            _adminRepository.Setup(customer =&gt; customer.GetAllPendingRequests()).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = _adminController.GetAllPendingRequests();
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.False);
        }
        [Test]
        public void GetAllApprovedRequests()
        {
            _adminRepository.Setup(customer =&gt; customer.GetAllApprovedRequests()).Returns(new List&lt;KYCEntity&gt;());
            var response = _adminController.GetAllApprovedRequests();
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.True);
        }
        [Test]
        public void GetAllApprovedRequests_exception()
        {
            _adminRepository.Setup(customer =&gt; customer.GetAllApprovedRequests()).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = _adminController.GetAllApprovedRequests();
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.False);
        }
        [Test]
        public void GetAllRejectedRequests()
        {
            _adminRepository.Setup(customer =&gt; customer.GetAllRejectedRequests()).Returns(new List&lt;KYCEntity&gt;());
            var response = _adminController.GetAllRejectedRequests();
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.True);
        }
        [Test]
        public void GetAllRejectedRequests_Exception()
        {
            _adminRepository.Setup(customer =&gt; customer.GetAllRejectedRequests()).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = _adminController.GetAllRejectedRequests();
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.False);
        }
        [Test]
        public void GetCustomerDetails()
        {
            _adminRepository.Setup(customer =&gt; customer.GetCustomerDetails(10000001)).Returns(new BasicDetailsEntity());
            var response = _adminController.GetCustomerDetails(10000001);
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.True);
        }
        [Test]
        public void GetCustomerDetails_Exception()
        {
            _adminRepository.Setup(customer =&gt; customer.GetCustomerDetails(0)).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = _adminController.GetCustomerDetails(0);
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.False);
        }
        [Test]
        public void ApproveRequest()
        {
            _adminRepository.Setup(customer =&gt; customer.ApproveRequest(10000001));
            var response = _adminController.ApproveRequest(10000001);
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.True);
        }
        [Test]
        public void ApproveRequest_Exception()
        {
            _adminRepository.Setup(customer =&gt; customer.ApproveRequest(0)).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = _adminController.ApproveRequest(0);
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.False);
        }
        [Test]
        public void RejectRequest()
        {
            _adminRepository.Setup(customer =&gt; customer.RejectRequest(10000001));
            var response = _adminController.RejectRequest(10000001);
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.True);
        }
        [Test]
        public void RejectRequest_Exception()
        {
            _adminRepository.Setup(customer =&gt; customer.RejectRequest(0)).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = _adminController.RejectRequest(0);
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.False);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[26,9,26,10,1],[28,9,28,10,1],[31,9,31,10,1],[32,13,32,51,1],[33,13,33,89,1],[34,13,34,60,1],[36,13,36,67,1],[37,13,37,157,1],[38,13,38,92,1],[39,13,39,94,1],[40,13,40,87,1],[42,13,42,110,1],[43,13,43,61,1],[44,13,44,88,1],[45,9,45,10,1],[48,9,48,10,1],[49,13,49,113,1],[50,13,50,69,1],[51,13,51,69,1],[52,13,52,51,1],[53,9,53,10,1],[56,9,56,10,1],[57,13,57,128,1],[58,13,58,69,1],[59,13,59,69,1],[60,13,60,52,1],[61,9,61,10,1],[64,9,64,10,1],[65,13,65,114,1],[66,13,66,70,1],[67,13,67,69,1],[68,13,68,51,1],[69,9,69,10,1],[72,9,72,10,1],[73,13,73,129,1],[74,13,74,70,1],[75,13,75,69,1],[76,13,76,52,1],[77,9,77,10,1],[80,9,80,10,1],[81,13,81,114,1],[82,13,82,70,1],[83,13,83,69,1],[84,13,84,51,1],[85,9,85,10,1],[88,9,88,10,1],[89,13,89,129,1],[90,13,90,70,1],[91,13,91,69,1],[92,13,92,52,1],[93,9,93,10,1],[96,9,96,10,1],[97,13,97,121,1],[98,13,98,74,1],[99,13,99,69,1],[100,13,100,51,1],[101,9,101,10,1],[104,9,104,10,1],[105,13,105,126,1],[106,13,106,67,1],[107,13,107,69,1],[108,13,108,52,1],[109,9,109,10,1],[112,9,112,10,1],[113,13,113,83,1],[114,13,114,70,1],[115,13,115,69,1],[116,13,116,51,1],[117,9,117,10,1],[120,9,120,10,1],[121,13,121,122,1],[122,13,122,63,1],[123,13,123,69,1],[124,13,124,52,1],[125,9,125,10,1],[128,9,128,10,1],[129,13,129,82,1],[130,13,130,69,1],[131,13,131,69,1],[132,13,132,51,1],[133,9,133,10,1],[136,9,136,10,1],[137,13,137,121,1],[138,13,138,62,1],[139,13,139,69,1],[140,13,140,52,1],[141,9,141,10,1]]);
    </script>
  </body>
</html>