<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\ENVAULT\Envault-Backend\Envault-Backend\Program.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using ApplicationLayer.Interfaces;
using CoreModels.Entities;
using DataAccessLayer.Infrastructure;
using Microsoft.AspNetCore.Authentication.JwtBearer;
using Microsoft.EntityFrameworkCore;
using Microsoft.IdentityModel.Tokens;
using Serilog;
using System.Text;

var builder = WebApplication.CreateBuilder(args);

// Add services to the container.

builder.Services.AddControllers().AddJsonOptions(options =&gt;
{
    options.JsonSerializerOptions.ReferenceHandler = System.Text.Json.Serialization.ReferenceHandler.IgnoreCycles;
});

// Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle
builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen();
builder.Configuration.AddJsonFile($&quot;Config/responseMessages.json&quot;, true, true);
builder.Services.AddScoped&lt;IUnitOfWork, UnitOfWork&gt;();
builder.Services.AddScoped&lt;IAccountOpeningRepository, AccountOpeningRepository&gt;();
builder.Services.AddScoped&lt;IUserValidationRepository, UserValidationRepository&gt;();
builder.Services.AddScoped&lt;ILoginAndRegistrationRepository, LoginAndRegistrationRepository&gt;();
builder.Services.AddScoped&lt;ICustomerRepository, CustomerRepository&gt;();
builder.Services.AddScoped&lt;IAdminRepository, AdminRepository&gt;();
builder.Services.AddScoped&lt;ILoanRepository, LoanRepository&gt;();
builder.Services.AddDbContext&lt;ApplicationDBContext&gt;(options =&gt;
options.UseSqlServer(builder.Configuration.GetConnectionString(&quot;DefaultConnection&quot;)));
var logger = new LoggerConfiguration().ReadFrom.Configuration(builder.Configuration).Enrich.FromLogContext().CreateLogger();
builder.Logging.ClearProviders();
builder.Logging.AddSerilog(logger);
builder.Services.AddCors(options =&gt;
{
    options.AddPolicy(&quot;CorsPolicy&quot;,
        builder =&gt;
        {
            builder.WithOrigins(&quot;http://localhost:4300&quot;, &quot;http://localhost:4301&quot;)
                .AllowAnyHeader()
                .AllowAnyMethod();
        });
});
builder.Services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme)
    .AddJwtBearer(options =&gt;
    {
        options.TokenValidationParameters = new TokenValidationParameters
        {
            ValidateIssuer = true,
            ValidateAudience = true,
            ValidateLifetime = true,
            ValidateIssuerSigningKey = true,
            ClockSkew = TimeSpan.Zero,
            ValidIssuer = builder.Configuration[&quot;Jwt:Issuer&quot;],
            ValidAudience = builder.Configuration[&quot;Jwt:Audience&quot;],
            IssuerSigningKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(builder.Configuration[&quot;Jwt:Key&quot;]))
        };

    });
builder.Services.AddAuthorization();

var app = builder.Build();

// Configure the HTTP request pipeline.
if (app.Environment.IsDevelopment())
{
    app.UseSwagger();
    app.UseSwaggerUI();
}

app.UseHttpsRedirection();

app.UseAuthorization();

app.UseCors(&quot;CorsPolicy&quot;);

app.MapControllers();

app.Run();

    </pre>
    <script type="text/javascript">
      highlightRanges([[10,1,10,50,0],[14,1,15,1,0],[15,1,15,2,0],[15,2,16,5,0],[16,5,16,115,0],[16,115,17,1,0],[17,1,17,2,0],[17,2,17,4,0],[20,1,20,44,0],[21,1,21,34,0],[22,1,22,80,0],[23,1,23,55,0],[24,1,24,83,0],[25,1,25,83,0],[26,1,26,95,0],[27,1,27,71,0],[28,1,28,65,0],[29,1,29,63,0],[30,1,31,1,0],[31,1,31,85,0],[31,85,31,87,0],[32,1,32,125,0],[33,1,33,34,0],[34,1,34,36,0],[35,1,36,1,0],[36,1,36,2,0],[36,2,37,5,0],[37,5,39,9,0],[39,9,39,10,0],[39,10,40,13,0],[40,13,42,35,0],[42,35,43,9,0],[43,9,43,10,0],[43,10,43,12,0],[43,12,44,1,0],[44,1,44,2,0],[44,2,44,4,0],[45,1,47,5,0],[47,5,47,6,0],[47,6,48,9,0],[48,9,58,11,0],[58,11,60,5,0],[60,5,60,6,0],[60,6,60,8,0],[61,1,61,37,0],[63,1,63,27,0],[66,1,66,37,0],[67,1,67,2,0],[68,5,68,22,0],[69,5,69,24,0],[70,1,70,2,0],[72,1,72,27,0],[74,1,74,24,0],[76,1,76,27,0],[78,1,78,22,0],[80,1,80,11,0]]);
    </script>
  </body>
</html>