<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\ENVAULT\Envault-Backend\Envault-Backend\Controllers\AdminController.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using ApplicationLayer.Interfaces;
using BusinessLogicLayer;
using CoreModels;
using CoreModels.Entities;
using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Mvc;

namespace Envault_Backend.Controllers
{
    [Route(&quot;api/[controller]&quot;)]
    [ApiController]
    public class AdminController : ControllerBase
    {
        private readonly AdminService _adminService;
        private readonly IConfiguration _configuration;
        private readonly ILogger&lt;AdminController&gt; _logger;
        public AdminController(IUnitOfWork unitOfWork, IConfiguration configuration, ILogger&lt;AdminController&gt; logger)
        {
            _adminService = new AdminService(unitOfWork);
            _configuration = configuration;
            _logger = logger;
        }
        [HttpGet]
        [Route(&quot;GetAllPendingRequests&quot;)]
        public async Task&lt;GenericResponse&gt; GetAllPendingRequests()
        {
            try
            {
                List&lt;KYCEntity&gt; pendingRequests = _adminService.GetAllPendingRequests();
                return new GenericResponse { Status = true, Data = pendingRequests };
            }
            catch (Exception ex)
            {
                _logger.LogError(ex.Message);
                return new GenericResponse { Status = false, Error = new Error() { Description = &quot;&quot; } };
            }
        }
        [HttpGet]
        [Route(&quot;GetAllApprovedRequests&quot;)]
        public GenericResponse GetAllApprovedRequests()
        {
            try
            {
                List&lt;KYCEntity&gt; approvedRequests = _adminService.GetAllApprovedRequests();
                return new GenericResponse { Status = true, Data = approvedRequests };
            }
            catch (Exception ex)
            {
                _logger.LogError(ex.Message);
                return new GenericResponse { Status = false, Error = new Error() { Description = &quot;&quot; } };
            }
        }
        [HttpGet]
        [Route(&quot;GetAllRejectedRequests&quot;)]
        public GenericResponse GetAllRejectedRequests()
        {
            try
            {
                List&lt;KYCEntity&gt; rejectedRequests = _adminService.GetAllRejectedRequests();
                return new GenericResponse { Status = true, Data = rejectedRequests };
            }
            catch (Exception ex)
            {
                _logger.LogError(ex.Message);
                return new GenericResponse { Status = false, Error = new Error() { Description = &quot;&quot; } };
            }
        }
        [HttpGet]
        [Route(&quot;GetCustomerDetails&quot;)]
        public GenericResponse GetCustomerDetails(long customerId)
        {
            try
            {
                BasicDetailsEntity customerDetails = _adminService.GetCustomerDetails(customerId);
                return new GenericResponse { Status = true, Data = customerDetails };
            }
            catch (Exception ex)
            {
                _logger.LogError(ex.Message);
                return new GenericResponse { Status = false, Error = new Error() { Description = &quot;&quot; } };
            }
        }
        [HttpPut]
        [Route(&quot;ApproveRequest&quot;)]
        public GenericResponse ApproveRequest(long customerId)
        {
            try
            {
                _adminService.ApproveRequest(customerId);
                return new GenericResponse { Status = true, Data = _configuration[&quot;GenericMessages:Values:kycApproved&quot;] };
            }
            catch (Exception ex)
            {
                _logger.LogError(ex.Message);
                return new GenericResponse { Status = false, Error = new Error() { Description = &quot;&quot; } };
            }
        }
        [HttpPut]
        [Route(&quot;RejectRequest&quot;)]
        public GenericResponse RejectRequest(long customerId)
        {
            try
            {
                _adminService.RejectRequest(customerId);
                return new GenericResponse { Status = true, Data = _configuration[&quot;GenericMessages:Values:kycRejected&quot;] };
            }
            catch (Exception ex)
            {
                _logger.LogError(ex.Message);
                return new GenericResponse { Status = false, Error = new Error() { Description = &quot;&quot; } };
            }
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[17,9,17,118,0],[18,9,18,10,0],[19,13,19,58,0],[20,13,20,44,0],[21,13,21,30,0],[22,9,22,10,0],[26,9,26,10,0],[28,13,28,14,0],[29,17,29,89,0],[30,17,30,86,0],[32,13,32,33,0],[33,13,33,14,0],[34,17,34,46,0],[35,17,35,105,0],[37,9,37,10,0],[41,9,41,10,0],[43,13,43,14,0],[44,17,44,91,0],[45,17,45,87,0],[47,13,47,33,0],[48,13,48,14,0],[49,17,49,46,0],[50,17,50,105,0],[52,9,52,10,0],[56,9,56,10,0],[58,13,58,14,0],[59,17,59,91,0],[60,17,60,87,0],[62,13,62,33,0],[63,13,63,14,0],[64,17,64,46,0],[65,17,65,105,0],[67,9,67,10,0],[71,9,71,10,0],[73,13,73,14,0],[74,17,74,99,0],[75,17,75,86,0],[77,13,77,33,0],[78,13,78,14,0],[79,17,79,46,0],[80,17,80,105,0],[82,9,82,10,0],[86,9,86,10,0],[88,13,88,14,0],[89,17,89,58,0],[90,17,90,123,0],[92,13,92,33,0],[93,13,93,14,0],[94,17,94,46,0],[95,17,95,105,0],[97,9,97,10,0],[101,9,101,10,0],[103,13,103,14,0],[104,17,104,57,0],[105,17,105,123,0],[107,13,107,33,0],[108,13,108,14,0],[109,17,109,46,0],[110,17,110,105,0],[112,9,112,10,0]]);
    </script>
  </body>
</html>