<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\ENVAULT\Envault-Backend\UnitTesting\AccountOpeningTest\AccountOpeningRepositoryTest.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using CoreModels.Entities;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using UnitTesting.Utils;

namespace UnitTesting.AccountOpeningTest
{
    public class AccountOpeningRepositoryTest : DbContextMock
    {
        [Test]
        public void CheckUserExistence()
        {
            var response = _accountOpeningRepository.CheckUserExistence(981234567890, 9876543210, DateOnly.Parse(&quot;1978-01-01&quot;));
            Assert.That(response.CustomerId, Is.EqualTo(10000001));
        }
        [Test]
        public void CheckUserExistence_Exception()
        {
            _mockContext.Setup(a =&gt; a.Set&lt;BasicDetailsEntity&gt;()).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = Assert.Throws&lt;Exception&gt;(() =&gt; _accountOpeningRepository.CheckUserExistence(0,0, DateOnly.Parse(&quot;1978-01-01&quot;)));
            Assert.That(response.Message, Is.EqualTo(&quot;Something went wrong&quot;));
        }
        [Test]
        [TestCase(&quot;abc@gmail.com&quot;)]
        [TestCase(&quot;sriram@gmail.com&quot;)]
        public void IsUniqueEmail(string email)
        {
            var response = _accountOpeningRepository.IsUniqueEmail(email);
            if (email == &quot;abc@gmail.com&quot;)
                Assert.That(response, Is.True);
            else if (email == &quot;sriram@gmail.com&quot;)
                Assert.That(response, Is.False);
        }
        [Test]
        public void IsUniqueEmail_Exception()
        {
            _mockContext.Setup(a =&gt; a.Set&lt;BasicDetailsEntity&gt;()).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = Assert.Throws&lt;Exception&gt;(() =&gt; _accountOpeningRepository.IsUniqueEmail(&quot;&quot;));
            Assert.That(response.Message, Is.EqualTo(&quot;Something went wrong&quot;));
        }
        [Test]
        [TestCase(&quot;MKTPK0515H&quot;)]
        [TestCase(&quot;MKTPK0515M&quot;)]
        public void IsUniquePANNumber(string panNumber)
        {
            var response = _accountOpeningRepository.IsUniquePANNumber(panNumber);
            if (panNumber == &quot;MKTPK0515H&quot;)
                Assert.That(response, Is.True);
            else if (panNumber == &quot;MKTPK0515M&quot;)
                Assert.That(response, Is.False);
        }
        [Test]
        public void IsUniquePANNumber_Exception()
        {
            _mockContext.Setup(a =&gt; a.Set&lt;BasicDetailsEntity&gt;()).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = Assert.Throws&lt;Exception&gt;(() =&gt; _accountOpeningRepository.IsUniquePANNumber(&quot;&quot;));
            Assert.That(response.Message, Is.EqualTo(&quot;Something went wrong&quot;));
        }
        [Test]
        public void GetAllBranches()
        {
            var response = _accountOpeningRepository.GetAllBranches();
            Assert.That(response, Is.Not.Null);
        }
        [Test]
        public void GetAllBranches_Exception()
        {
            _mockContext.Setup(a =&gt; a.Set&lt;BranchEntity&gt;()).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = Assert.Throws&lt;Exception&gt;(() =&gt; _accountOpeningRepository.GetAllBranches());
            Assert.That(response.Message, Is.EqualTo(&quot;Something went wrong&quot;));
        }
        [Test]
        [TestCase(1)]
        [TestCase(7)]
        [TestCase(8)]
        public void GenerateAccountNumber(int accountTypeId)
        {
            AccountsEntity account = new() { AccountTypeId = accountTypeId };
            var response = _accountOpeningRepository.GenerateAccountNumber(account);

        }
        [Test]
        public void GenerateAccountNumber_Exception()
        {
            AccountsEntity account = new() { AccountTypeId=1 };
            _mockContext.Setup(a =&gt; a.Set&lt;AccountsEntity&gt;()).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = Assert.Throws&lt;Exception&gt;(() =&gt; _accountOpeningRepository.GenerateAccountNumber(account));
            Assert.That(response.Message, Is.EqualTo(&quot;Something went wrong&quot;));
        }
        [Test]
        public void CreateNewAccount()
        {

        }
        [Test]
        public void CreateNewAccount_Exception()
        {
            var response = Assert.Throws&lt;Exception&gt;(() =&gt; _accountOpeningRepository.CreateNewAccount(new BasicDetailsEntity()));
            Assert.That(response.Message, Is.EqualTo(&quot;Object reference not set to an instance of an object.&quot;));
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[15,9,15,10,1],[16,13,16,129,1],[17,13,17,68,1],[18,9,18,10,1],[21,9,21,10,1],[22,13,22,112,1],[23,13,23,59,1],[23,59,23,138,1],[23,138,23,140,1],[24,13,24,79,1],[25,9,25,10,1],[30,9,30,10,1],[31,13,31,75,1],[32,13,32,42,1],[33,17,33,48,1],[34,18,34,50,1],[35,17,35,49,1],[36,9,36,10,1],[39,9,39,10,1],[40,13,40,112,1],[41,13,41,59,1],[41,59,41,102,1],[41,102,41,104,1],[42,13,42,79,1],[43,9,43,10,1],[48,9,48,10,1],[49,13,49,83,1],[50,13,50,43,1],[51,17,51,48,1],[52,18,52,48,1],[53,17,53,49,1],[54,9,54,10,1],[57,9,57,10,1],[58,13,58,112,1],[59,13,59,59,1],[59,59,59,106,1],[59,106,59,108,1],[60,13,60,79,1],[61,9,61,10,1],[64,9,64,10,1],[65,13,65,71,1],[66,13,66,48,1],[67,9,67,10,1],[70,9,70,10,1],[71,13,71,106,1],[72,13,72,59,1],[72,59,72,101,1],[72,101,72,103,1],[73,13,73,79,1],[74,9,74,10,1],[80,9,80,10,1],[81,13,81,78,1],[82,13,82,85,1],[84,9,84,10,1],[87,9,87,10,1],[88,13,88,64,1],[89,13,89,108,1],[90,13,90,59,1],[90,59,90,115,1],[90,115,90,117,1],[91,13,91,79,1],[92,9,92,10,1],[95,9,95,10,1],[97,9,97,10,1],[100,9,100,10,1],[101,13,101,59,1],[101,59,101,127,1],[101,127,101,129,1],[102,13,102,112,1],[103,9,103,10,1]]);
    </script>
  </body>
</html>