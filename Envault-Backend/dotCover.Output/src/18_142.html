<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\ENVAULT\Envault-Backend\UnitTesting\AdminTest\AdminControllerTest.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using ApplicationLayer.Interfaces;
using CoreModels;
using CoreModels.Entities;
using DataAccessLayer.Infrastructure;
using Envault_Backend.Controllers;
using Microsoft.Extensions.Configuration;
using Microsoft.Extensions.Logging;
using Moq;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace UnitTesting.AdminTest
{
    public class AdminControllerTest
    {
        private AdminController _adminController;
        private Mock&lt;IAdminRepository&gt; _adminRepository;
        private Mock&lt;IUnitOfWork&gt; _unitOfWork;
        private Mock&lt;IConfiguration&gt; _mockConfig;
        private Mock&lt;ILogger&lt;AdminController&gt;&gt; _logger;
        [OneTimeSetUp]
        public void SetUp()
        {

        }
        [SetUp]
        public void ReintializeTest()
        {
            _unitOfWork = new Mock&lt;IUnitOfWork&gt;();
            _mockConfig = new Mock&lt;Microsoft.Extensions.Configuration.IConfiguration&gt;();
            _logger = new Mock&lt;ILogger&lt;AdminController&gt;&gt;();

            var configSection = new Mock&lt;IConfigurationSection&gt;();
            configSection.Setup(a =&gt; a.GetSection(&quot;Key&quot;).Value).Returns(&quot;Devika@123#$%^&amp;*&amp;^%$#$%^&amp;*&amp;^%$#%^&amp;*(*&amp;$#@#%^&amp;*&amp;^$#%^&amp;*&amp;^$#$%^&amp;*&amp;^%$#$%&amp;*&amp;^$#$%&amp;*&quot;);
            configSection.Setup(a =&gt; a.GetSection(&quot;Issuer&quot;).Value).Returns(&quot;Devika@12345&quot;);
            configSection.Setup(a =&gt; a.GetSection(&quot;Audience&quot;).Value).Returns(&quot;Devika@12345&quot;);
            configSection.Setup(a =&gt; a[&quot;GenericMessages:Values:kycApproved&quot;]).Returns(&quot;KYC of the customer is approved&quot;);
            configSection.Setup(a =&gt; a[&quot;GenericMessages:Values:kycRejected&quot;]).Returns(&quot;KYC of the customer is Rejected&quot;);
            _mockConfig.Setup(a =&gt; a.GetSection(&quot;Jwt&quot;)).Returns(configSection.Object);

            _adminController = new AdminController(_unitOfWork.Object, configSection.Object, _logger.Object);
            _adminRepository = new Mock&lt;IAdminRepository&gt;();
            _unitOfWork.Setup(a =&gt; a.AdminRepository).Returns(_adminRepository.Object);
        }
        [Test]
        public void GetAllPendingRequests()
        {
            _adminRepository.Setup(customer =&gt; customer.GetAllPendingRequests()).Returns(new List&lt;KYCEntity&gt;());
            var response = _adminController.GetAllPendingRequests();
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.True);
        }
        [Test]
        public void GetAllPendingRequests_Exception()
        {
            _adminRepository.Setup(customer =&gt; customer.GetAllPendingRequests()).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = _adminController.GetAllPendingRequests();
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.False);
        }
        [Test]
        public void GetAllApprovedRequests()
        {
            _adminRepository.Setup(customer =&gt; customer.GetAllApprovedRequests()).Returns(new List&lt;KYCEntity&gt;());
            var response = _adminController.GetAllApprovedRequests();
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.True);
        }
        [Test]
        public void GetAllApprovedRequests_exception()
        {
            _adminRepository.Setup(customer =&gt; customer.GetAllApprovedRequests()).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = _adminController.GetAllApprovedRequests();
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.False);
        }
        [Test]
        public void GetAllRejectedRequests()
        {
            _adminRepository.Setup(customer =&gt; customer.GetAllRejectedRequests()).Returns(new List&lt;KYCEntity&gt;());
            var response = _adminController.GetAllRejectedRequests();
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.True);
        }
        [Test]
        public void GetAllRejectedRequests_Exception()
        {
            _adminRepository.Setup(customer =&gt; customer.GetAllRejectedRequests()).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = _adminController.GetAllRejectedRequests();
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.False);
        }
        [Test]
        public void GetCustomerDetails()
        {
            _adminRepository.Setup(customer =&gt; customer.GetCustomerDetails(10000001)).Returns(new BasicDetailsEntity());
            var response = _adminController.GetCustomerDetails(10000001);
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.True);
        }
        [Test]
        public void GetCustomerDetails_Exception()
        {
            _adminRepository.Setup(customer =&gt; customer.GetCustomerDetails(0)).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = _adminController.GetCustomerDetails(0);
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.False);
        }
        [Test]
        public void ApproveRequest()
        {
            _adminRepository.Setup(customer =&gt; customer.ApproveRequest(10000001));
            var response = _adminController.ApproveRequest(10000001);
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.True);
            Assert.That(response.Data, Is.EqualTo(&quot;KYC of the customer is approved&quot;));
        }
        [Test]
        public void ApproveRequest_Exception()
        {
            _adminRepository.Setup(customer =&gt; customer.ApproveRequest(0)).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = _adminController.ApproveRequest(0);
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.False);
        }
        [Test]
        public void RejectRequest()
        {
            _adminRepository.Setup(customer =&gt; customer.RejectRequest(10000001));
            var response = _adminController.RejectRequest(10000001);
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.True);
            Assert.That(response.Data, Is.EqualTo(&quot;KYC of the customer is Rejected&quot;));
        }
        [Test]
        public void RejectRequest_Exception()
        {
            _adminRepository.Setup(customer =&gt; customer.RejectRequest(0)).Throws(new Exception(&quot;Something went wrong&quot;));
            var response = _adminController.RejectRequest(0);
            Assert.That(response, Is.InstanceOf&lt;GenericResponse&gt;());
            Assert.That(response.Status, Is.False);
        }
    }
}

    </pre>
    <script type="text/javascript">
      highlightRanges([[26,9,26,10,1],[28,9,28,10,1],[31,9,31,10,1],[32,13,32,51,1],[33,13,33,89,1],[34,13,34,60,1],[36,13,36,67,1],[37,13,37,157,1],[38,13,38,92,1],[39,13,39,94,1],[40,13,40,122,1],[41,13,41,122,1],[42,13,42,87,1],[44,13,44,110,1],[45,13,45,61,1],[46,13,46,88,1],[47,9,47,10,1],[50,9,50,10,1],[51,13,51,113,1],[52,13,52,69,1],[53,13,53,69,1],[54,13,54,51,1],[55,9,55,10,1],[58,9,58,10,1],[59,13,59,128,1],[60,13,60,69,1],[61,13,61,69,1],[62,13,62,52,1],[63,9,63,10,1],[66,9,66,10,1],[67,13,67,114,1],[68,13,68,70,1],[69,13,69,69,1],[70,13,70,51,1],[71,9,71,10,1],[74,9,74,10,1],[75,13,75,129,1],[76,13,76,70,1],[77,13,77,69,1],[78,13,78,52,1],[79,9,79,10,1],[82,9,82,10,1],[83,13,83,114,1],[84,13,84,70,1],[85,13,85,69,1],[86,13,86,51,1],[87,9,87,10,1],[90,9,90,10,1],[91,13,91,129,1],[92,13,92,70,1],[93,13,93,69,1],[94,13,94,52,1],[95,9,95,10,1],[98,9,98,10,1],[99,13,99,121,1],[100,13,100,74,1],[101,13,101,69,1],[102,13,102,51,1],[103,9,103,10,1],[106,9,106,10,1],[107,13,107,126,1],[108,13,108,67,1],[109,13,109,69,1],[110,13,110,52,1],[111,9,111,10,1],[114,9,114,10,1],[115,13,115,83,1],[116,13,116,70,1],[117,13,117,69,1],[118,13,118,51,1],[119,13,119,87,1],[120,9,120,10,1],[123,9,123,10,1],[124,13,124,122,1],[125,13,125,63,1],[126,13,126,69,1],[127,13,127,52,1],[128,9,128,10,1],[131,9,131,10,1],[132,13,132,82,1],[133,13,133,69,1],[134,13,134,69,1],[135,13,135,51,1],[136,13,136,87,1],[137,9,137,10,1],[140,9,140,10,1],[141,13,141,121,1],[142,13,142,62,1],[143,13,143,69,1],[144,13,144,52,1],[145,9,145,10,1]]);
    </script>
  </body>
</html>